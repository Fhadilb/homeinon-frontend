<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home In On</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #faf7f3;
      --card: #ffffff;
      --text: #222222;
      --muted: #6f6f6f;
      --accent: #c9b7a4;
      --accent-press: #b7a492;
      --shadow: 0 8px 20px rgba(0,0,0,.06);
      --radius: 14px;
    }

    html, body { margin:0; padding:0; }
    body {
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.45;
      padding: 24px;
    }

    /* Top bar */
    .top-bar {
      display:flex; align-items:center; justify-content:space-between;
      gap:16px; margin-bottom:22px;
    }

    /* ‚úÖ Use your uploaded image as the logo */
    .logo-img {
      height:60px;           /* adjust here if you want smaller/larger */
      width:auto;
      display:block;
    }

    .tagline {
      font-size:12px; color:var(--muted); margin-top:6px; letter-spacing:.02em;
    }

    .right { display:flex; align-items:center; gap:10px; flex-wrap:wrap; }

    .top-bar button {
      background:#222; color:#fff; border:none; border-radius:10px;
      padding:10px 16px; cursor:pointer; font-weight:600;
      transition: transform .1s, background .2s; box-shadow: var(--shadow);
    }
    .top-bar button:hover { transform: translateY(-1px); background:#333; }

    /* Style selector */
    .styles { display:flex; gap:14px; margin:8px 0 18px; flex-wrap:wrap; }
    .style-card {
      width:112px; height:112px; border-radius:12px; overflow:hidden; cursor:pointer; position:relative;
      border:2px solid transparent; transition:transform .2s, border .2s, box-shadow .2s;
      background:#eee; display:flex; align-items:center; justify-content:center; box-shadow:var(--shadow);
    }
    .style-card img { width:100%; height:100%; object-fit:cover; display:block; }
    .style-card span {
      position:absolute; bottom:5px; left:0; right:0; text-align:center; color:#fff; font-weight:700;
      text-shadow:0 0 5px rgba(0,0,0,.5); background:rgba(0,0,0,.25); padding:2px 0; font-size:12px;
    }
    .style-card:hover { transform:scale(1.03); }
    .style-card.active { border:2px solid var(--accent); transform:scale(1.03); }

    /* Filters */
    .filters {
      background:var(--card); padding:16px; border-radius:var(--radius); box-shadow:var(--shadow);
      margin-bottom:18px; display:flex; flex-wrap:wrap; align-items:flex-end; gap:18px;
    }
    .filter-group { display:flex; flex-direction:column; min-width:200px; }
    label { font-size:12px; text-transform:uppercase; letter-spacing:.06em; color:var(--muted); margin-bottom:6px; }
    select, input[type=range], input[type=text] {
      padding:10px; border-radius:10px; border:1px solid #e6e0d9; font-size:14px; background:#fff; color:var(--text); outline:none;
    }
    input[type=text]:focus, select:focus { border-color:var(--accent); box-shadow:0 0 0 3px rgba(201,183,164,.25); }
    #applyFilters {
      background:var(--accent); color:#2a2928; border:none; border-radius:10px;
      padding:10px 16px; cursor:pointer; transition: background .2s, transform .12s; font-weight:700;
    }
    #applyFilters:hover { background:var(--accent-press); transform: translateY(-1px); }

    #product-count { font-weight:700; margin:6px 2px 8px; color:#3a3a3a; }

    @keyframes fadeIn { from {opacity:0; transform: translateY(4px)} to {opacity:1; transform:none} }
    .product {
      background:var(--card); padding:14px; margin:10px 0; border-radius:var(--radius); box-shadow:var(--shadow);
      animation:fadeIn .28s ease-in; position:relative; display:flex; gap:16px; align-items:flex-start;
    }
    .product img { width:172px; height:124px; object-fit:cover; border-radius:10px; background:#eee; flex-shrink:0; }
    .product h2 { margin:4px 0 6px; font-size:18px; font-weight:700; }
    .product p { margin:2px 0; color:#494949; }
    .product-style {
      position:absolute; top:10px; right:10px; font-size:12px; background:#f0ece7;
      padding:4px 8px; border-radius:8px; color:#2a2928; font-weight:700; border:1px solid #e6e0d9;
    }

    .heart-btn {
      font-size:22px; color:#b9b9b9; cursor:pointer; transition:color .2s, transform .2s;
      background:none; border:none; position:absolute; bottom:12px; right:16px;
    }
    .heart-btn:hover { transform:scale(1.15); }
    .heart-btn.liked { color:#e63946; transform:scale(1.15); }
    @keyframes pulse { 0%{transform:scale(1)}25%{transform:scale(1.4)}50%{transform:scale(1.2)}100%{transform:scale(1)} }
    .pulse { animation:pulse .3s ease; }

    @media (max-width:820px){
      body{ padding:16px; }
      .product{ flex-direction:column; }
      .product img{ width:100%; height:200px; }
      .filters{ gap:12px; }
      .filter-group{ min-width:unset; width:100%; }
      .styles{ gap:10px; }
      .style-card{ width:44vw; height:44vw; max-width:150px; max-height:150px; }
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div>
      <!-- ‚úÖ Your exact logo image -->
      <img src="home-in-on-logo.webp" alt="home in on logo" class="logo-img" />
      <div class="tagline">Curate ¬∑ Create ¬∑ Inspire</div>
    </div>

    <div class="right">
      <button id="toggleFavourites">‚≠ê View Favourites</button>
    </div>
  </div>

  <!-- Styles -->
  <div class="styles" id="styleSelector">
    <div class="style-card" data-style="modern"><img src="https://placehold.co/240x240?text=Modern" alt="Modern"><span>Modern</span></div>
    <div class="style-card" data-style="boho"><img src="https://placehold.co/240x240?text=Boho" alt="Boho"><span>Boho</span></div>
    <div class="style-card" data-style="scandi"><img src="https://placehold.co/240x240?text=Scandi" alt="Scandi"><span>Scandi</span></div>
    <div class="style-card" data-style="industrial"><img src="https://placehold.co/240x240?text=Industrial" alt="Industrial"><span>Industrial</span></div>
  </div>

  <!-- Filters -->
  <div class="filters">
    <div class="filter-group">
      <label for="searchBox">Search</label>
      <input type="text" id="searchBox" placeholder="Sofa, mirror, lamp..." />
    </div>

    <div class="filter-group">
      <label for="category">Categories</label>
      <select id="category" multiple size="4">
        <option value="furniture">Furniture</option>
        <option value="decor">Decor</option>
        <option value="lighting">Lighting</option>
        <option value="mirrors">Mirrors</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="priceRange">Max Price (¬£)</label>
      <input type="range" id="priceRange" min="0" max="2000" step="50" value="2000" />
      <span id="priceValue">2000</span>
    </div>

    <button id="applyFilters">Apply Filters</button>
  </div>

  <p id="product-count"></p>
  <div id="product-list"></div>

  <script>
    const API_URL = "https://homeinon-backend.onrender.com/products";
    let allProducts = [];
    let selectedStyle = "";
    let showFavourites = false;
    let favourites = JSON.parse(localStorage.getItem("favourites")) || [];

    function productImg(src){
      const fallback = "https://placehold.co/520x360?text=Product";
      return `<img src="${src || fallback}" alt="Product" onerror="this.onerror=null;this.src='${fallback}';">`;
    }

    async function loadProducts(){
      try{
        const res = await fetch(API_URL, { headers:{Accept:"application/json"}});
        const data = await res.json();
        allProducts = data.products || [];
        const styles = ["modern","boho","scandi","industrial"];
        allProducts.forEach((p,i)=> p.style = p.style || styles[i % styles.length]);
        renderProducts(allProducts);
      }catch(e){
        document.getElementById("product-list").innerHTML = "<p>Could not load products.</p>";
        console.error(e);
      }
    }

    function renderProducts(products){
      const container = document.getElementById("product-list");
      const counter = document.getElementById("product-count");
      container.innerHTML = "";

      if(!products.length){
        counter.textContent = "No products found.";
        container.innerHTML = "<p>No products found.</p>";
        return;
      }

      counter.textContent = `${products.length} product${products.length>1?"s":""} found`;

      products.forEach(p=>{
        const isLiked = favourites.includes(p.title);
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
          <div class="product-style">${p.style || "N/A"}</div>
          ${productImg(p.image_url)}
          <div>
            <h2>${p.title}</h2>
            <p>Category: ${p.category}</p>
            <p>Style: ${p.style || "N/A"}</p>
            <p>Price: ¬£${(p.price_cents/100).toFixed(2)}</p>
          </div>
          <button class="heart-btn ${isLiked?"liked":""}" data-title="${p.title}" aria-label="Save to favourites">‚ù§</button>
        `;
        container.appendChild(div);
      });

      document.querySelectorAll(".heart-btn").forEach(btn=>{
        btn.addEventListener("click", ()=> toggleFavourite(btn.dataset.title, btn));
      });
    }

    function toggleFavourite(title, btn){
      const idx = favourites.indexOf(title);
      if(idx>=0){ favourites.splice(idx,1); btn.classList.remove("liked"); }
      else { favourites.push(title); btn.classList.add("liked","pulse"); setTimeout(()=>btn.classList.remove("pulse"),300); }
      localStorage.setItem("favourites", JSON.stringify(favourites));
    }

    function applyFilters(){
      const searchText = document.getElementById("searchBox").value.toLowerCase();
      const selectedCategories = Array.from(document.getElementById("category").selectedOptions).map(o=>o.value);
      const maxPrice = parseInt(document.getElementById("priceRange").value,10);

      let filtered = allProducts.filter(p=>{
        const matchesSearch = p.title.toLowerCase().includes(searchText) || p.category.toLowerCase().includes(searchText);
        const priceOk = (p.price_cents/100) <= maxPrice;
        const categoryOk = !selectedCategories.length || selectedCategories.includes(p.category.toLowerCase());
        const styleOk = !selectedStyle || (p.style && p.style.toLowerCase()===selectedStyle);
        return matchesSearch && priceOk && categoryOk && styleOk;
      });

      if(showFavourites){ filtered = filtered.filter(p=> favourites.includes(p.title)); }
      renderProducts(filtered);
    }

    document.getElementById("searchBox").addEventListener("input", applyFilters);
    document.getElementById("priceRange").addEventListener("input", e=>{
      document.getElementById("priceValue").textContent = e.target.value; applyFilters();
    });
    document.getElementById("category").addEventListener("change", applyFilters);
    document.getElementById("applyFilters").addEventListener("click", applyFilters);

    const styleCards = document.querySelectorAll(".style-card");
    styleCards.forEach(card=>{
      card.addEventListener("click", ()=>{
        styleCards.forEach(c=>c.classList.remove("active"));
        if(selectedStyle===card.dataset.style){ selectedStyle=""; }
        else { selectedStyle=card.dataset.style; card.classList.add("active"); }
        applyFilters();
      });
    });

    document.getElementById("toggleFavourites").addEventListener("click", ()=>{
      showFavourites = !showFavourites;
      document.getElementById("toggleFavourites").textContent = showFavourites ? "üîô View All" : "‚≠ê View Favourites";
      applyFilters();
    });

    loadProducts();
  </script>
</body>
</html>
