<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HomeInOn</title>
  <style>
    :root {
      --brand-accent: #F4A27B;
      --brand-bg: #FFF8F5;
      --ink: #2C2C2C;
      --muted: #6B6B6B;
      --card: #FFFFFF;
    }

    body {
      font-family: "Arial", sans-serif;
      background: var(--brand-bg);
      color: var(--ink);
      margin: 0;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--card);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
      padding-bottom: 10px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
    }

    .logo img {
      height: 60px;
    }

    button {
      background: var(--brand-accent);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 8px 16px;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      background: #e18f6a;
    }

    #filterToggle {
      display: none;
      width: 100%;
      background: var(--brand-accent);
      color: #fff;
      border: none;
      padding: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    .filters {
      display: grid;
      grid-template-columns: repeat(5, minmax(160px, 1fr));
      gap: 16px;
      background: var(--card);
      padding: 10px 20px;
      border-top: 1px solid #eee;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .filter-group label {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .styles {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding: 10px 20px;
      background: var(--card);
    }

    .style-card {
      min-width: 130px;
      height: 110px;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
      cursor: pointer;
      border: 2px solid transparent;
      flex: 0 0 auto;
    }

    .style-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .style-card span {
      position: absolute;
      bottom: 5px;
      left: 0;
      right: 0;
      text-align: center;
      color: #fff;
      font-weight: bold;
      background: rgba(0, 0, 0, 0.25);
    }

    .style-card.active {
      border: 2px solid var(--brand-accent);
    }

    #product-list {
      display: grid;
      gap: 24px;
      padding: 0 20px 30px;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
    }

    .product {
      background: white;
      border-radius: 12px;
      box-shadow: 0 1px 8px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      position: relative;
      transition: transform 0.2s;
    }

    .product img {
      width: 100%;
      height: 320px;
      object-fit: cover;
    }

    .product-info {
      padding: 14px;
    }

    .style-label {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--brand-accent);
      color: white;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: bold;
    }

    /* Custom Colour Dropdown */
    .colour-dropdown {
      position: relative;
    }

    .colour-select {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ddd;
      cursor: pointer;
      background: white;
    }

    .colour-list {
      display: none;
      position: absolute;
      top: 110%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      max-height: 200px;
      overflow-y: auto;
      z-index: 10;
    }

    .colour-list.active {
      display: block;
    }

    .colour-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .colour-item:hover {
      background: #f8f8f8;
    }

    .swatch {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 1px solid #ccc;
    }

    @media (max-width: 768px) {
      header {
        position: static;
      }

      .filters {
        display: none;
        grid-template-columns: 1fr;
      }

      .filters.active {
        display: grid;
      }

      #filterToggle {
        display: block;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="top-bar">
      <div class="logo"><img src="Home-in-on-logo.webp" alt="HomeInOn Logo"></div>
      <button id="toggleFavourites">⭐ View Favourites</button>
    </div>

    <div class="styles" id="styleSelector"></div>
    <button id="filterToggle">Show Filters ⬇️</button>

    <section class="filters" id="filters">
      <div class="filter-group">
        <label for="searchBox">Search</label>
        <input type="text" id="searchBox" placeholder="e.g. oak table, mirror, sofa…" />
      </div>

      <div class="filter-group">
        <label for="category">Category</label>
        <select id="category"><option value="">All</option></select>
      </div>

      <div class="filter-group">
        <label for="material">Material</label>
        <select id="material"><option value="">All</option></select>
      </div>

      <div class="filter-group colour-dropdown">
        <label for="colourSelect">Colour</label>
        <div id="colourSelect" class="colour-select">All</div>
        <div id="colourList" class="colour-list"></div>
      </div>

      <div class="filter-group">
        <label for="priceRange">Max Price (£)</label>
        <input type="range" id="priceRange" min="0" max="2000" step="10" value="2000" />
        <span id="priceValue">£2000</span>
      </div>
    </section>
  </header>

  <p id="product-count"></p>
  <div id="product-list"></div>

  <script>
    const API_URL = "https://homeinon-backend.onrender.com/products";

    const colourMap = {
      white:"#ffffff", black:"#000000", grey:"#9e9e9e", oak:"#c49a6c",
      walnut:"#7a5734", pine:"#d5b887", beige:"#d9c7a2", gold:"#c8a951",
      silver:"#bdbdbd", blue:"#5a7abf", green:"#6aa67a", red:"#c74c4c",
      brown:"#8b5a2b", cream:"#f3e9d2", yellow:"#f8e473", ivory:"#fffff0",
      natural:"#d6b98c", charcoal:"#36454f", teal:"#367588", taupe:"#b38b6d",
      stone:"#c2b59b", pink:"#f7c6d9", orange:"#f6a04d", navy:"#001f3f",
      mink:"#b7a295", copper:"#b87333", bronze:"#cd7f32", lilac:"#c8a2c8",
      sage:"#a9bfa5", mustard:"#e1ad01", terracotta:"#e2725b", pewter:"#8e9292"
    };

    function colourHex(name){ return colourMap[name?.toLowerCase()] || "#ccc"; }

    let allProducts = [];
    let selectedColour = "";

    function uniqueValues(items, field) {
      const s = new Set();
      items.forEach(p => {
        const v = p[field];
        if (!v) return;
        String(v).split(/[,/|;]/).forEach(x => {
          const val = x.trim();
          if (val) s.add(val);
        });
      });
      return [...s];
    }

    function buildColourDropdown(colours) {
      const select = document.getElementById("colourSelect");
      const list = document.getElementById("colourList");
      list.innerHTML = "";

      const allItem = document.createElement("div");
      allItem.className = "colour-item";
      allItem.textContent = "All";
      allItem.addEventListener("click", () => {
        selectedColour = "";
        select.textContent = "All";
        list.classList.remove("active");
        applyFilters();
      });
      list.appendChild(allItem);

      colours.forEach(c => {
        const item = document.createElement("div");
        item.className = "colour-item";
        item.innerHTML = `<div class="swatch" style="background:${colourHex(c)}"></div>${c}`;
        item.addEventListener("click", () => {
          selectedColour = c;
          select.innerHTML = `<div class="swatch" style="background:${colourHex(c)}"></div>${c}`;
          list.classList.remove("active");
          applyFilters();
        });
        list.appendChild(item);
      });

      select.addEventListener("click", () => list.classList.toggle("active"));
      document.addEventListener("click", e => {
        if (!e.target.closest(".colour-dropdown")) list.classList.remove("active");
      });
    }

    function renderProducts(products) {
      const list = document.getElementById("product-list");
      const count = document.getElementById("product-count");
      list.innerHTML = "";
      count.textContent = `${products.length} product${products.length !== 1 ? "s" : ""} found`;
      products.forEach(p => {
        const price = parseFloat(p.price) || 0;
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
          <div class="style-label">${p.style || ""}</div>
          <img src="${p.image_url}" alt="${p.title}" />
          <div class="product-info">
            <h3>${p.title}</h3>
            <p class="price">£${price.toFixed(2)}</p>
          </div>`;
        list.appendChild(div);
      });
    }

    function applyFilters() {
      const q = document.getElementById("searchBox").value.toLowerCase();
      const cat = document.getElementById("category").value;
      const mat = document.getElementById("material").value;
      const max = parseFloat(document.getElementById("priceRange").value) || Infinity;

      const filtered = allProducts.filter(p => {
        const t = (p.title || "").toLowerCase();
        const d = (p.description || "").toLowerCase();
        const search = !q || t.includes(q) || d.includes(q);
        const catOK = !cat || p.category === cat;
        const matOK = !mat || p.material === mat;
        const colOK = !selectedColour || (p.colour && p.colour.toLowerCase().includes(selectedColour.toLowerCase()));
        const pr = parseFloat(p.price) || 0;
        const priceOK = pr <= max;
        return search && catOK && matOK && colOK && priceOK;
      });
      renderProducts(filtered);
    }

    async function loadProducts() {
      const res = await fetch(API_URL);
      const data = await res.json();
      allProducts = data.products;
      buildColourDropdown(uniqueValues(allProducts, "colour"));
      renderProducts(allProducts);
    }

    loadProducts();
  </script>
</body>
</html>








